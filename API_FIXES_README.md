# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ API 404

## üîç –ü—Ä–æ–±–ª–µ–º–∞
Frontend –ø–æ–ª—É—á–∞–ª –æ—à–∏–±–∫–∏ 404 –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö endpoints:
- `GET /api/inventory/products` 
- `GET /api/forecast/metrics`

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤ `warehouseApi.ts`
**–ü—Ä–æ–±–ª–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –∏–∑ localStorage
**–†–µ—à–µ–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Supabase API

```typescript
// –°—Ç–∞—Ä—ã–π –∫–æ–¥:
const getAuthToken = (): string | null => {
  const authData = localStorage.getItem('supabase.auth.token');
  // ...
};

// –ù–æ–≤—ã–π –∫–æ–¥:
const getAuthToken = async (): Promise<string | null> => {
  const { data: { session } } = await supabase.auth.getSession();
  return session?.access_token || null;
};
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–π endpoint `/api/forecast/metrics`
**–ü—Ä–æ–±–ª–µ–º–∞**: Endpoint –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª –≤ backend
**–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ `getOverallMetrics` –≤ `forecastController.ts`

```typescript
// –ù–æ–≤—ã–π endpoint:
router.get('/metrics', dualAuthenticateToken, getOverallMetrics as any);
```

### 3. –ú–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏:
- `totalPredictions` - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
- `averageAccuracy` - —Å—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å
- `avgMAPE` - —Å—Ä–µ–¥–Ω—è—è –∞–±—Å–æ–ª—é—Ç–Ω–∞—è –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è –æ—à–∏–±–∫–∞
- `avgMAE` - —Å—Ä–µ–¥–Ω—è—è –∞–±—Å–æ–ª—é—Ç–Ω–∞—è –æ—à–∏–±–∫–∞
- `accuracyTrend` - —Ç—Ä–µ–Ω–¥ —Ç–æ—á–Ω–æ—Å—Ç–∏ (improving/stable/declining)
- `lastUpdated` - –¥–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ endpoints:
```bash
python test_api_endpoints.py
```

## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ ML –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å**:
   ```bash
   cd mlnew
   python mock_microservice.py
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ backend** (–≤ –Ω–æ–≤–æ–π –∫–æ–Ω—Å–æ–ª–∏):
   ```bash
   cd backend
   npm run dev
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ frontend** (–≤ –Ω–æ–≤–æ–π –∫–æ–Ω—Å–æ–ª–∏):
   ```bash
   cd frontend
   npm run dev
   ```

4. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ**:
   ```
   http://localhost:5174/sales-forecast-new
   ```

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é**: –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É —á–µ—Ä–µ–∑ frontend
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö**: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ 404
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞**: –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ API

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞—é—Ç—Å—è:

1. **–û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞** –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** –≤ Developer Tools > Application > Local Storage
3. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã** –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø–æ—Ä—Ç–∞—Ö:
   - Backend: `http://localhost:3000`
   - Frontend: `http://localhost:5174`
   - ML Service: `http://localhost:8000`

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **Backend endpoints**: –í—Å–µ —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `dualAuthenticateToken`
- **Frontend**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Supabase –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **ML Service**: –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `ML_SERVICE_URL` environment variable
- **Database**: Supabase PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ 