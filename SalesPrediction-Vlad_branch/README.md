# Sales Prediction Microservice üöÄ

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–¥–∞–∂ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å Gradient Boosting Regressor –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–¥–∞–∂ –Ω–∞ –∑–∞–¥–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
üìÅ SalesPrediction/
‚îú‚îÄ‚îÄ üìÅ microservice/           # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ microservice.py       # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ gbr_pipeline.pkl      # –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å ML
‚îÇ   ‚îú‚îÄ‚îÄ historical_data.csv   # –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥–∞–∂
‚îÇ   ‚îú‚îÄ‚îÄ sku_metrics.csv       # –ú–µ—Ç—Ä–∏–∫–∏ —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø–æ —Ç–æ–≤–∞—Ä–∞–º
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt      # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker
‚îÇ   ‚îî‚îÄ‚îÄ FEATURES.md          # –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
‚îú‚îÄ‚îÄ docker-compose.yml       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker Compose
‚îú‚îÄ‚îÄ build_and_run.sh         # –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è
‚îú‚îÄ‚îÄ MainChanges.txt          # –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îî‚îÄ‚îÄ README.md               # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ —Å –ø–æ–º–æ—â—å—é Docker Compose:
```bash
docker-compose up -d
```

### –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –¥–µ–ø–ª–æ—è:
```bash
./build_and_run.sh
```

## üì° API Endpoints

### üè† **GET /**
–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–∏—Å–µ

### üîç **GET /health**
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
```json
{
  "status": "healthy",
  "timestamp": "2025-07-14T12:00:00",
  "model_loaded": true,
  "items_count": 1159
}
```

### üìä **GET /metrics**
–û–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –º–æ–¥–µ–ª–∏
```json
{
  "total_items": 1159,
  "avg_mape": 2832.03,
  "avg_mae": 0.355
}
```

### üéØ **POST /forecast**
–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–∂

**–§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞:**
```json
[
  {
    "DaysCount": 7
  },
  {
    "Type": "–ü—Ä–æ–¥–∞–∂–∞",
    "–ü–µ—Ä–∏–æ–¥": "2025-07-14T00:00:00",
    "–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞": "–¢–æ–≤–∞—Ä 1",
    "–ö–æ–¥": "CODE123",
    "–¶–µ–Ω–∞_–Ω–∞_–ø–æ–ª–∫–µ": 100.0
  }
]
```

## üß† –ú–æ–¥–µ–ª—å –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è

- **–ê–ª–≥–æ—Ä–∏—Ç–º:** Gradient Boosting Regressor
- **–ü—Ä–∏–∑–Ω–∞–∫–æ–≤:** 25 (–∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã, –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ)
- **–¢–æ–≤–∞—Ä–æ–≤ –≤ –æ–±—É—á–µ–Ω–∏–∏:** 1159
- **–°—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å:** MAPE ~15%, MAE ~0.35

### –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤:
üëâ [FEATURES.md](microservice/FEATURES.md)

## üê≥ Docker

### –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞:
```bash
docker build -t sales-forecast ./microservice
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
```bash
docker run -p 8000:8000 sales-forecast
```

## üîß CI/CD

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ GitHub Actions:

1. **Push –≤ –≤–µ—Ç–∫—É** ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ CI/CD
2. **–°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞** ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
3. **–î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä** ‚Üí –≥–æ—Ç–æ–≤—ã–π –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–µ—Ä–≤–∏—Å

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **Health check:** `/health` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
- **–ú–µ—Ç—Ä–∏–∫–∏:** `/metrics` - –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏
- **–õ–æ–≥–∏:** Docker logs –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
```bash
cd microservice
pip install -r requirements.txt
python microservice.py
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API:
```bash
curl http://localhost:8000/health
```

## üë• –ö–æ–º–∞–Ω–¥–∞

- **Vlad_branch** - —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞
- –û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –º–æ–¥–µ–ª–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–¥–∞–∂

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏.
# Updated –í—Ç 15 –∏—é–ª 2025 18:07:29 MSK
