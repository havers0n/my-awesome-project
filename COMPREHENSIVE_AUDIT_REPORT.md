# –ö–û–ú–ü–õ–ï–ö–°–ù–´–ô –ê–£–î–ò–¢ –ë–ï–ö–ï–ù–î–ê –ò –§–†–û–ù–¢–ï–ù–î–ê

*–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞: 05 —è–Ω–≤–∞—Ä—è 2025*

## üéØ –ö–†–ê–¢–ö–û–ï –†–ï–ó–Æ–ú–ï

–ü—Ä–æ–≤–µ–¥–µ–Ω –ø–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç —Å–∏—Å—Ç–µ–º—ã, –æ—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ —É–¥–µ–ª–µ–Ω–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/sales-forecast-new`, —Å–æ–∑–¥–∞–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∞–¥–º–∏–Ω–∫–µ –∏ –ø—Ä–æ–±–ª–µ–º–∞–º —Å organization_id. –í—ã—è–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã.

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### 1. –û–¢–°–£–¢–°–¢–í–ò–ï –ö–õ–Æ–ß–ï–í–û–ì–û MIDDLEWARE
**–°—Ç–∞—Ç—É—Å: –ö–†–ò–¢–ò–ß–ù–û**
- –§–∞–π–ª `backend/src/middleware/supabaseAuthMiddleware.ts` **–ù–ï –°–£–©–ï–°–¢–í–£–ï–¢**, –Ω–æ –Ω–∞ –Ω–µ–≥–æ —Å—Å—ã–ª–∞—é—Ç—Å—è —Ç–µ—Å—Ç—ã
- Pull Request #1 —É–ø–æ–º–∏–Ω–∞–µ—Ç —ç—Ç–æ—Ç middleware, –Ω–æ –æ–Ω –Ω–µ –±—ã–ª —Å–æ–∑–¥–∞–Ω
- –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–∞–¥–µ–Ω–∏—é —Ç–µ—Å—Ç–æ–≤ –∏ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–º —Ñ—É–Ω–∫—Ü–∏—è–º

### 2. –ù–ï–ë–ï–ó–û–ü–ê–°–ù–ê–Ø –õ–û–ì–ò–ö–ê ORGANIZATION_ID 
**–°—Ç–∞—Ç—É—Å: –ö–†–ò–¢–ò–ß–ù–û - –£–ì–†–û–ó–ê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò**

–í `backend/src/controllers/inventoryController.ts`:
```typescript
// –û–ü–ê–°–ù–ê–Ø –õ–û–ì–ò–ö–ê - –û–ë–•–û–î–ò–¢ –ü–†–û–í–ï–†–ö–£ –û–†–ì–ê–ù–ò–ó–ê–¶–ò–ò
if (organizationId) {
    query = query.eq('organization_id', organizationId);
} else {
    console.log('[3] No organization ID found. Fetching all products.');
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç organization_id, —Å–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –í–°–ï –ø—Ä–æ–¥—É–∫—Ç—ã
- –õ—é–±–æ–π –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å –¥–∞–Ω–Ω—ã–µ –≤—Å–µ—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
- –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ data isolation –∏ RBAC
- –í –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –Ω–∞–ø–∏—Å–∞–Ω–æ "—ç—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ–±—Ö–æ–¥–Ω–æ–π –ø—É—Ç—å", –Ω–æ –æ–Ω –≤ production

### 3. MIDDLEWARE REQUIREORGANIZATION –û–¢–ö–õ–Æ–ß–ï–ù
**–°—Ç–∞—Ç—É—Å: –ö–†–ò–¢–ò–ß–ù–û**

–í `backend/src/routes/inventoryRoutes.ts`:
```typescript
// router.use(requireOrganization); // –ó–ê–ö–û–ú–ú–ï–ù–¢–ò–†–û–í–ê–ù–û!
```

–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∞, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É —É—è–∑–≤–∏–º–æ–π.

## üîç –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –ö–û–ú–ü–û–ù–ï–ù–¢–û–í

### –°–ò–°–¢–ï–ú–ê –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–ò

**–°—Ç–∞—Ç—É—Å: –ß–ê–°–¢–ò–ß–ù–û –†–ê–ë–û–¢–ê–ï–¢, –ï–°–¢–¨ –ü–†–û–ë–õ–ï–ú–´**

#### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- `backend/src/middleware/authenticate.ts` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ dual-auth (Supabase + legacy JWT)
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–±–æ–≥–∞—â–µ–Ω–∏–µ `req.user` –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –ë–î

#### ‚ùå –ü—Ä–æ–±–ª–µ–º—ã:
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `supabaseAuthMiddleware.ts`
- –¢–µ—Å—Ç—ã —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
- Middleware `requireOrganization` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö

### –°–¢–†–ê–ù–ò–¶–ê /SALES-FORECAST-NEW

**–°—Ç–∞—Ç—É—Å: –¢–ï–•–ù–ò–ß–ï–°–ö–ò –ì–û–¢–û–í–ê, –ù–û –£–Ø–ó–í–ò–ú–ê**

#### ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ –≥–æ—Ç–æ–≤:
- `frontend/src/pages/SalesForecastNewPage.tsx` –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API —á–µ—Ä–µ–∑ `warehouseApi.ts`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è, —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞, –º–µ—Ç—Ä–∏–∫

#### ‚úÖ –ë–µ–∫–µ–Ω–¥ API –≥–æ—Ç–æ–≤:
- `backend/src/controllers/forecastController.ts` - –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- ML —Å–µ—Ä–≤–∏—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `ML_SERVICE_URL`
- Endpoint `/api/forecast/predict` —Ä–∞–±–æ—Ç–∞–µ—Ç

#### ‚ùå –ü—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- –ò–∑-–∑–∞ –æ–±—Ö–æ–¥–∞ organization_id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —á—É–∂–∏–º –¥–∞–Ω–Ω—ã–º
- –ù–µ—Ç –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏

### –°–û–ó–î–ê–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô –í –ê–î–ú–ò–ù–ö–ï

**–°—Ç–∞—Ç—É—Å: –†–ï–ê–õ–ò–ó–û–í–ê–ù–û –ü–†–ê–í–ò–õ–¨–ù–û**

#### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- `frontend/src/pages/AdminCreateUser.tsx` - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- `backend/src/controllers/adminController.ts` - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Supabase Admin API
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å: –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –≤ –ë–î, –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ –≤ Auth
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

#### ‚ö†Ô∏è –ù—é–∞–Ω—Å—ã:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `authAPI.register`, –Ω–æ —Ñ–∞–π–ª —Å authAPI –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø–æ–∏—Å–∫–µ
- –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —ç—Ç–æ–≥–æ API —Å–µ—Ä–≤–∏—Å–∞

### API ENDPOINTS –ê–ù–ê–õ–ò–ó

**–°—Ç–∞—Ç—É—Å: –°–ú–ï–®–ê–ù–ù–´–ô**

#### ‚úÖ –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ endpoints:
- `/api/forecast/*` - –∑–∞—â–∏—â–µ–Ω–æ `authenticate` middleware
- `/api/admin/*` - –∑–∞—â–∏—â–µ–Ω–æ `authenticate` 
- `/api/organizations/*` - –∑–∞—â–∏—â–µ–Ω–æ `authenticate` + admin permissions
- `/api/ml/*` - –∑–∞—â–∏—â–µ–Ω–æ `authenticate`

#### ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ:
- `/api/inventory/*` - authenticate –µ—Å—Ç—å, –Ω–æ requireOrganization –æ—Ç–∫–ª—é—á–µ–Ω
- `/api/monetization/*` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `rbacMiddleware`, –Ω–æ authenticate –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å

#### ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ endpoints (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–µ–∑–∞—â–∏—â–µ–Ω–Ω—ã–µ):
- `/api/inventory/hello`
- `/api/inventory/test-no-auth`
- `/health`

### –°–¢–†–£–ö–¢–£–†–ê –ë–ê–ó–´ –î–ê–ù–ù–´–•

**–°—Ç–∞—Ç—É—Å: –ö–û–†–†–ï–ö–¢–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê**

#### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–≤—è–∑–∏:
```sql
users.organization_id ‚Üí organizations.id
users.default_location_id ‚Üí locations.id
products.organization_id ‚Üí organizations.id
operations.organization_id ‚Üí organizations.id
operations.product_id ‚Üí products.id
```

#### ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:
- –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏–º–µ—é—Ç organization_id
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- Supabase Auth –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `users.id ‚Üí auth.users.id`

### –í–ó–ê–ò–ú–û–î–ï–ô–°–¢–í–ò–ï –§–†–û–ù–¢–ï–ù–î-–ë–ï–ö–ï–ù–î

**–°—Ç–∞—Ç—É—Å: –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–û –ü–†–ê–í–ò–õ–¨–ù–û–ï**

#### ‚úÖ –ß—Ç–æ —Ö–æ—Ä–æ—à–æ:
- `frontend/src/services/warehouseApi.ts` - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ Supabase —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∑–∞–ø—Ä–æ—Å—ã
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∫—Å–∏ Vite –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤

#### ‚úÖ API —Å–µ—Ä–≤–∏—Å—ã:
- `frontend/src/services/api.ts` - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π interceptor –¥–ª—è auth
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∏–∑ localStorage
- Error handling –∏ retry –ª–æ–≥–∏–∫–∞

## üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ

### 1. –ù–ï–ú–ï–î–õ–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (–ö–†–ò–¢–ò–ß–ù–û)

#### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É organization_id:
```typescript
// backend/src/controllers/inventoryController.ts
export const getProducts = async (req: Request, res: Response) => {
    const user = (req as any).user;
    const organizationId = user?.organization_id;

    if (!organizationId) {
        return res.status(403).json({ 
            error: 'User is not associated with an organization' 
        });
    }

    // –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å
    const { data, error } = await supabase
        .from('products')
        .select('*')
        .eq('organization_id', organizationId);
    
    // ... rest of the code
};
```

#### –í–∫–ª—é—á–∏—Ç—å requireOrganization middleware:
```typescript
// backend/src/routes/inventoryRoutes.ts
router.use(authenticate);
router.use(requireOrganization); // –†–ê–ó–ö–û–ú–ú–ï–ù–¢–ò–†–û–í–ê–¢–¨!
```

#### –°–æ–∑–¥–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π supabaseAuthMiddleware.ts:
```typescript
// backend/src/middleware/supabaseAuthMiddleware.ts
import { Request, Response, NextFunction } from 'express';
import { supabaseAdmin } from '../supabaseAdminClient';

export const authenticateSupabaseToken = async (
    req: Request, 
    res: Response, 
    next: NextFunction
): Promise<void> => {
    // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Å—Ç–æ–≤ –≤ __tests__/supabaseAuthMiddleware.test.ts
    // ... implementation
};
```

### 2. –£–õ–£–ß–®–ï–ù–ò–Ø –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò

#### –î–æ–±–∞–≤–∏—Ç—å RBAC –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö endpoints:
```typescript
// –ü—Ä–∏–º–µ—Ä –¥–ª—è inventory routes
router.get('/products', 
    authenticate, 
    requireOrganization,
    rbacMiddleware(['admin', 'employee', 'franchisee']),
    getProducts
);
```

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º:
```typescript
// –î–æ–±–∞–≤–∏—Ç—å –≤ –≤—Å–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
console.log(`[SECURITY] User ${user.id} from org ${user.organization_id} accessed products`);
```

### 3. –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

#### –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- –¢–µ—Å—Ç –ø–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —á—É–∂–∏–º –¥–∞–Ω–Ω—ã–º
- –¢–µ—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ–∑ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –¢–µ—Å—Ç –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏

### 4. –ú–û–ù–ò–¢–û–†–ò–ù–ì

#### –î–æ–±–∞–≤–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:
- –ó–∞–ø—Ä–æ—Å—ã –±–µ–∑ organization_id
- –ü–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —á—É–∂–∏–º –¥–∞–Ω–Ω—ã–º
- –ù–µ–æ–±—ã—á–Ω–æ –±–æ–ª—å—à–∏–µ –≤—ã–±–æ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö

## üéØ –°–¢–ê–¢–£–° –ì–û–¢–û–í–ù–û–°–¢–ò /SALES-FORECAST-NEW

**–¢–ï–•–ù–ò–ß–ï–°–ö–ò –ì–û–¢–û–í ‚úÖ, –ù–û –ù–ï–ë–ï–ó–û–ü–ê–°–ï–ù ‚ö†Ô∏è**

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
- API endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ML –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º:
1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É organization_id –≤ getProducts
2. –í–∫–ª—é—á–∏—Ç—å requireOrganization middleware
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–ª—è—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö
4. –°–æ–∑–¥–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π supabaseAuthMiddleware.ts

## üöÄ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (1-2 –¥–Ω—è):
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É organization_id –≤ inventoryController.ts
2. ‚úÖ –í–∫–ª—é—á–∏—Ç—å requireOrganization middleware
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å supabaseAuthMiddleware.ts
4. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–ª—è—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (1 –Ω–µ–¥–µ–ª—è):
1. –î–æ–±–∞–≤–∏—Ç—å RBAC –≤–æ –≤—Å–µ endpoints
2. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
4. –ù–∞–π—Ç–∏ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å authAPI –≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏):
1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
2. –£–ª—É—á—à–µ–Ω–∏–µ UX
3. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
4. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üìä –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê

- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: ‚úÖ –•–æ—Ä–æ—à–∞—è (8/10)
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: ‚úÖ –ì–æ—Ç–æ–≤–∞ (9/10)  
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: ‚ùå –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (3/10)
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É**: ‚ùå –ù–ï –ì–û–¢–û–í –±–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

**–í—ã–≤–æ–¥:** –°–∏—Å—Ç–µ–º–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –≥–æ—Ç–æ–≤–∞, –Ω–æ –∏–º–µ–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ. 