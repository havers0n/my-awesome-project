# Миграция entities слоя - Фаза 5

## Выполненные задачи

### 1. Создана структура entities слоя

```
entities/
├── user/
│   ├── model/
│   │   ├── types.ts
│   │   └── index.ts
│   ├── api/
│   │   ├── userApi.ts
│   │   └── index.ts
│   ├── ui/
│   │   ├── UserAvatar.tsx
│   │   └── index.ts
│   └── index.ts
├── product/
│   ├── model/
│   │   ├── types.ts
│   │   └── index.ts
│   ├── api/
│   │   ├── productApi.ts
│   │   └── index.ts
│   ├── ui/
│   │   ├── ProductCard.tsx
│   │   └── index.ts
│   └── index.ts
├── order/
│   ├── model/
│   │   ├── types.ts
│   │   └── index.ts
│   ├── api/
│   │   ├── orderApi.ts
│   │   └── index.ts
│   └── index.ts
├── organization/
│   ├── model/
│   │   ├── types.ts
│   │   └── index.ts
│   └── index.ts
├── location/
│   ├── model/
│   │   ├── types.ts
│   │   └── index.ts
│   └── index.ts
└── index.ts
```

### 2. Перенесены модели и типы

#### User Entity
- ✅ Типы пользователей из `types.admin.ts`
- ✅ Роли и разрешения
- ✅ Фильтры пользователей
- ✅ Утилитарные функции для работы с пользователями

#### Product Entity
- ✅ Типы продуктов из `types/product.ts` и `types.admin.ts`
- ✅ Статусы продуктов
- ✅ Утилитарные функции для работы с продуктами
- ✅ Конфигурация статусов

#### Order Entity
- ✅ Типы заказов из `types/order.ts`
- ✅ Статусы заказов
- ✅ Утилитарные функции для работы с заказами

#### Organization Entity
- ✅ Типы организаций из `types.admin.ts`
- ✅ Типы поставщиков
- ✅ Фильтры и утилитарные функции

#### Location Entity
- ✅ Типы локаций из `types.admin.ts`
- ✅ Типы локаций и статусы
- ✅ Утилитарные функции

### 3. Созданы API методы

#### User API
- ✅ `userApi`: CRUD операции для пользователей
- ✅ `roleApi`: CRUD операции для ролей
- ✅ `permissionApi`: CRUD операции для разрешений
- ✅ Фильтрация и поиск пользователей

#### Product API
- ✅ `productApi`: CRUD операции для продуктов
- ✅ Управление статусами и стоком
- ✅ Поиск и фильтрация продуктов
- ✅ Массовые операции

#### Order API
- ✅ `orderApi`: CRUD операции для заказов
- ✅ Управление статусами заказов
- ✅ Статистика заказов
- ✅ Получение заказов по клиентам

### 4. Созданы UI компоненты

#### UserAvatar
- ✅ Компонент для отображения аватара пользователя
- ✅ Поддержка различных размеров
- ✅ Fallback на инициалы
- ✅ Опциональный tooltip

#### ProductCard
- ✅ Компонент для отображения карточки продукта
- ✅ Отображение статуса и стока
- ✅ Настраиваемый контент
- ✅ Поддержка действий

## Преимущества архитектуры

### Слои сущностей
1. **model/**: Бизнес-логика и типы данных
2. **api/**: Методы для работы с API
3. **ui/**: Компоненты пользовательского интерфейса

### Инкапсуляция
- Каждая сущность инкапсулирована в своем модуле
- Четкое разделение ответственности
- Независимость сущностей друг от друга

### Переиспользование
- Типы и компоненты могут использоваться в разных частях приложения
- Единый источник истины для бизнес-логики
- Консистентность интерфейса

## Следующие шаги

1. **Доработка API методов** для organization и location
2. **Создание UI компонентов** для остальных сущностей
3. **Интеграция с существующими компонентами**
4. **Обновление импортов** в существующем коде
5. **Тестирование** новых компонентов

## Использование

```typescript
// Импорт типов
import { User, Product, Order } from '@/entities';

// Импорт API
import { userApi, productApi, orderApi } from '@/entities';

// Импорт UI компонентов
import { UserAvatar, ProductCard } from '@/entities';

// Использование
const user = await userApi.getUser('123');
const products = await productApi.getProducts({ status: 'active' });

// Компоненты
<UserAvatar user={user} size="md" />
<ProductCard product={product} onSelect={handleSelect} />
```

## Миграция завершена

Фаза 5 миграции entities слоя успешно завершена. Создана прочная основа для бизнес-сущностей приложения с четким разделением на модели, API и UI компоненты.
