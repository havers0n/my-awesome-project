# Инструкции по настройке базы данных

## Проблема
На странице `/inventory/management` не отображаются данные о:
- Количестве товаров (остатки по локациям)
- Производителях 
- Категориях

## Решение

### 1. Выполните SQL скрипты в Supabase SQL Editor

Перейдите в Supabase Dashboard → SQL Editor и выполните следующие скрипты **по порядку**:

#### Шаг 1: Создание представления и RPC функции
```sql
-- Выполните содержимое файла database/create_current_stock_view.sql
```

#### Шаг 2: Добавление тестовых данных
```sql
-- Выполните содержимое файла database/add_test_data.sql
```

### 2. Проверьте результат

После выполнения скриптов, API должен возвращать полные данные:

```bash
curl http://localhost:3000/api/inventory/products-test
```

Ожидаемый результат:
- `manufacturer`: { id: 1, name: "Mistral" }
- `category`: { id: 1, name: "Крупы и злаки" }
- `stock_by_location`: [{ location_id: 1, location_name: "Основной склад", stock: 29 }]

### 3. Альтернативный способ

Если у вас нет доступа к SQL Editor, скопируйте SQL команды из файлов:
- `database/create_current_stock_view.sql`
- `database/add_test_data.sql`

И выполните их через другой инструмент администрирования базы данных.

## Проверка работы

1. Откройте http://localhost:5173/inventory/management
2. Убедитесь, что отображаются:
   - Остатки товаров
   - Названия производителей
   - Категории товаров
   - Фильтры по категориям и производителям работают

## Статус исправления

- ✅ Backend API обновлен для правильного JOIN с manufacturers и categories
- ✅ Frontend типы обновлены для поддержки связанных данных
- ✅ Создано SQL представление для подсчета остатков
- ⏳ **ТРЕБУЕТСЯ**: Выполнить SQL скрипты в базе данных

После выполнения SQL скриптов система будет работать полностью корректно. 